<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>3D Model Viewer – Debug</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    html,body{margin:0;height:100%}
    model-viewer{width:100%;height:100%;display:block}
    #log{position:fixed;top:12px;left:12px;background:rgba(0,0,0,.6);color:#fff;
         padding:10px 12px;border-radius:10px;font:12px/1.4 ui-monospace,monospace;max-width:360px}
  </style>
</head>
<body>
  <div id="log">로딩 중…</div>

  <model-viewer id="mv"
    src="./untitled.glb?v=2"
    camera-controls
    auto-rotate
    shadow-intensity="1"
    exposure="1.1"
    environment-image="neutral"
    tone-mapping="neutral"
    reveal="auto"
    loading="eager"
    ar ar-modes="webxr scene-viewer quick-look">
  </model-viewer>

  <script>
    const mv = document.getElementById('mv');
    const log = (m)=>document.getElementById('log').textContent = m;

    mv.addEventListener('load',  ()=>log('✅ 로딩 성공'));
    mv.addEventListener('error', e=>{
      log('❌ 로드 오류: ' + (e.detail?.message || '알 수 없는 오류'));
      console.error('model-viewer error detail:', e.detail);
    });

    // 네트워크/캐시 문제 탐지용
    fetch('./untitled.glb?v=2')
      .then(r => log(`파일 접근: ${r.status} ${r.statusText}`))
      .catch(err => log('파일 접근 실패: ' + err));
  </script>
</body>
</html>
