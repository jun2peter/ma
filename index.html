<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GLB Viewer</title>
  <style>
    html,body{height:100%;margin:0;background:#111}
    #c{width:100%;height:100%;display:block}
    #log{position:fixed;top:12px;left:12px;background:rgba(0,0,0,.6);color:#fff;
         padding:10px 12px;border-radius:10px;font:12px/1.4 ui-monospace,monospace;max-width:380px}
  </style>
</head>
<body>
  <div id="log">로딩 중…</div>
  <canvas id="c"></canvas>
  <script type="module">
    import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js";
    import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/controls/OrbitControls.js";
    import { GLTFLoader } from "https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/GLTFLoader.js";
    import { DRACOLoader } from "https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/DRACOLoader.js";
    import { KTX2Loader } from "https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/KTX2Loader.js";
    import { MeshoptDecoder } from "https://cdn.jsdelivr.net/npm/meshoptimizer@0.20.0/meshopt_decoder.module.js";

    const logEl = document.getElementById('log');
    const log = (m)=> logEl.textContent = m;

    const renderer = new THREE.WebGLRenderer({canvas: document.getElementById('c'), antialias:true});
    renderer.setPixelRatio(devicePixelRatio);
    renderer.setSize(innerWidth, innerHeight);
    renderer.outputColorSpace = THREE.SRGBColorSpace;

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.01, 5000);
    camera.position.set(0, 1, 3);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    scene.add(new THREE.HemisphereLight(0xffffff, 0x222222, 1.0));
    const dir = new THREE.DirectionalLight(0xffffff, 1.0);
    dir.position.set(3, 5, 4); scene.add(dir);

    const loader = new GLTFLoader();
    const draco = new DRACOLoader();
    draco.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/");
    loader.setDRACOLoader(draco);
    loader.setMeshoptDecoder(MeshoptDecoder);

    const ktx2 = new KTX2Loader().setTranscoderPath("https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/libs/basis/");
    ktx2.detectSupport(renderer);
    loader.setKTX2Loader(ktx2);

    const url = "./untitled.glb?v=5"; // 캐시 회피
    loader.load(url, (gltf)=>{
      const model = gltf.scene; scene.add(model);
      const box = new THREE.Box3().setFromObject(model);
      const size = new THREE.Vector3(); box.getSize(size);
      const center = new THREE.Vector3(); box.getCenter(center);
      model.position.sub(center);
      const radius = Math.max(size.x, size.y, size.z)*0.6;
      const dist = radius / Math.sin(THREE.MathUtils.degToRad(camera.fov*0.5));
      camera.position.set(0, radius*0.6, dist);
      controls.target.set(0,0,0); controls.update();
      log('✅ 로딩 성공'); animate();
    }, (xhr)=>{
      if (xhr.total) log(`로딩 중… ${((xhr.loaded/xhr.total)*100).toFixed(0)}%`);
      else log(`로딩 중… ${Math.round(xhr.loaded/1024/1024)} MB`);
    }, (err)=>{
      console.error(err); log('❌ 로드 실패: ' + (err?.message || '알 수 없는 오류'));
    });

    function animate(){ requestAnimationFrame(animate); controls.update(); renderer.render(scene, camera); }
    addEventListener('resize', ()=>{ camera.aspect=innerWidth/innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth, in

